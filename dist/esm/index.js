import{jsx as e}from"react/jsx-runtime";import{createContext as t,useContext as n,useRef as r,useEffect as o,useState as a,useMemo as s}from"react";function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var c,l={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/c=l,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];o&&(e=r(e,n(o)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var o="";for(var a in n)e.call(n,a)&&n[a]&&(o=r(o,a));return o}function r(e,t){return t?e?e+" "+t:e+t:e}c.exports?(t.default=t,c.exports=t):window.classNames=t}();var u=i(l.exports);const d=t(null);function p(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}p(":where(.rac__input) {\n  background-color: #f6f7fc;\n  border: none;\n  border-bottom: 1px solid rgb(112, 112, 112);\n  padding-bottom: 1px;\n  text-align: center;\n  width: 48px;\n  height: 61px;\n  font-size: 16px;\n  line-height: 24px;\n\n  &[aria-selected=true] {\n    color: rgb(0, 126, 171);\n    border-bottom: 2px solid rgb(0, 126, 171);\n  }\n\n  &:focus {\n    outline: none;\n  }\n\n  &:disabled {\n    color: rgb(51, 51, 51);\n  }\n}\n");const f=({selected:t,canFocus:a,value:s,onBackspace:i,onChange:c,onPaste:l,onFocus:p})=>{const{password:f,inputClassName:g}=(()=>{const e=n(d);if(!e)throw new Error("useAuthCodeContext must be used within a AuthCodeContext Provider.");return e})(),h=r(null);o((()=>{t&&a&&h.current?.focus()}),[t,a]);return e("input",{ref:h,value:s,disabled:!t,maxLength:1,type:f?"password":"text",className:u("rac__input",g),"aria-selected":t,onChange:e=>{c(e.target.value)},onKeyDown:e=>{"Backspace"!==e.key||s||i()},onPaste:e=>{e.preventDefault();const t=e.clipboardData.getData("text");l(t)},onFocus:()=>{p()}})},g=(e,t,n)=>{if(!t)return!0;return(t instanceof RegExp?t:new RegExp(`${t}{0,${n}}$`)).test(e)};p(":where(.rac_container) {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}");const h=({value:t="",length:n=4,password:r=!1,disabled:i=!1,allowPaste:c=!0,pattern:l="",autoFocus:p=!1,inputClassName:h,containerClassName:m,onChange:x,onComplete:v})=>{const[y,b]=a(t),[w,C]=a(!1);o((()=>{g(t,l,n)&&b(t)}),[t,n,l]),o((()=>{y.length===n&&v?.(y)}),[y,n,v]);const N=e=>{g(e,l,n)&&(b(e),x?.(e))},P=()=>{if(A>0){const e=[...y];e[A-1]="",N(e.join(""))}},_=e=>{const t=[...y];t[A]=e,N(t.join(""))},S=e=>{if(c){const t=e.slice(0,n-A);g(t,l,n-A)&&N(y+t)}},j=()=>{C(!0)},A=s((()=>{for(let e=0;e<n;e++)if(""===y[e]||void 0===y[e])return e;return n-1}),[y,n]);return e(d.Provider,{value:{password:r,inputClassName:h},children:e("div",{className:u("rac_container",m),children:Array.from({length:n},((t,n)=>e(f,{selected:!i&&A===n,canFocus:p||w,value:y[n]||"",onBackspace:P,onChange:_,onPaste:S,onFocus:j},n)))})})};export{h as default};
//# sourceMappingURL=index.js.map
